---
layout:     post
title:    渗透测试学习-信息收集
subtitle:   渗透测试-信息收集
date:       2018-07-15
author:     hmoytx
header-img: img/bg_02.jpg
catalog: true
tags:
    - 渗透测试
    - 大黑阔
    - 信息收集
---
# 信息收集的重要性
信息收集是渗透测试重相当重要的一环，至少可以占整个渗透测试的一半，利用好收集到的信息，不仅能大大提高渗透的成功率，也能起到事半功倍的效果。

## whois信息查询
whois信息提供了域名注册的一些详细信息，chinaz查询，或者是kali中自带的一些工具。  
重点关注的信息：注册商，注册人（单位）信息，ip，DNS解析有关。有关ip还要考虑是否接入cdn等情况后面详细说。
站长之家查询结果：
![result](/img/chinaz.png)  
DNS解析记录有关可以去viewdns上查询。


## 指纹信息
通过分析响应头可以获取到web应用程序的脚本语言类型，中间件类型等。  
主要是：  
    Server: 中间件 如nginx，tomcat，weblogic等。  
    X-powered-by: 语言类型 如php  asp.net等。  
其他可能还可以获取到是否存在WAF等额外的信息。  
对于一些在网上使用较多的应用程序，可以通过工具的CMS识别（椰树御剑等工具）查出程序名，然后去收集公开的exp，现在也有类似whatcms的网站提供在线查询。  

## 目录结构
通过扫描获取整站目录结构，有利于我们对网站的结构有个直观清晰的印象，同时挖掘敏感文件。  
常见获取网站目录结构的方式：  
    1.爆破式扫描目录  
        主要工具：御剑，dirbrute， wwwscan等  
    2.整站爬行式扫描  
        主要工具：AWVS，Burp两者中的spider模块，webrobot（一款轻量级的爬行工具）等

## 二级域名收集
子域名挖掘目前常见的就是两种方式:  
    1.google 百度等搜索引擎收录，利用对应的语法查询去重，可以获得较多子域名。  
    2.利用工具爆破式挖掘。主要是两款工具：  
        subdomainbrute，layer均是通过字典爆破，存在误报的可能性较高

## 旁站C段
旁站查询的方法也有好几种：  
    1.工具扫描  
    2.搜索引擎，必应等 http://cn.bing.com/search?q=ip:主机ip  
    3.ip反查域名，爱站 chinaz  

C段的查询可以借助网络上的一些网站，带有C段查询的功能，只需输入ip即可  



## 服务器信息
主要是对主机的端口开放情况进行扫描，常用工具最粗暴简单有效的就是nmap。
nmap中最粗暴简单有效的参数A，默认扫描高危的1000个端口。其他的一些参数：  
p指定端口，-sS半开扫描，-v查看详情。  
nmap有图形界面工具zenmap可以用。  

## 其他的一些信息
数据库信息也是很重要的通常也能根据搭配来判断脚本类型，常见的搭配php+mysql，aspx+oracle，asp+access等。
